name: win_step_summary

on: workflow_dispatch

jobs:
  job1:
    runs-on: windows-latest
    steps:
    - run: Get-Content -Path $env:GITHUB_STEP_SUMMARY
    - run: Add-Content -Path $env:GITHUB_STEP_SUMMARY -Value "- Step 1"
    - run: Add-Content -Path $env:GITHUB_STEP_SUMMARY -Value "- Step 2"
    - run: Add-Content -Path $env:GITHUB_STEP_SUMMARY -Value "- Step 3"
    - run: Get-Content -Path $env:GITHUB_STEP_SUMMARY

  job2:
      runs-on: windows-latest
      steps:
      - run: Get-Content -Path $env:GITHUB_STEP_SUMMARY
      - run: Add-Content -Path $env:GITHUB_STEP_SUMMARY -Value "- Step 1"
      - run: Add-Content -Path $env:GITHUB_STEP_SUMMARY -Value "- Step 2"
      - run: Add-Content -Path $env:GITHUB_STEP_SUMMARY -Value "- Step 3"
      - run: Get-Content -Path $env:GITHUB_STEP_SUMMARY
      - run: |
          # $summary = Get-Content -Path $env:GITHUB_STEP_SUMMARY -Encoding utf8
          # "$summary`n- Step 4 (overwritten)" > $env:GITHUB_STEP_SUMMARY
          "- Step 4 (overwritten)" > $env:GITHUB_STEP_SUMMARY
      - run: Get-Content -Path $env:GITHUB_STEP_SUMMARY
